!function(){"use strict";var n={extensions:"all",table_class:"table"};angular.module("ui.pagedown",[]).directive("pagedownEditor",["$compile","$timeout","$window","$q",function(e,t,i,o){var a=0,r=Markdown.getSanitizingConverter();return Markdown.Extra.init(r,n),r.hooks.chain("preBlockGamut",function(n,e){return n.replace(/^ {0,3}""" *\n((?:.*?\n)+?) {0,3}""" *$/gm,function(n,t){return"<blockquote>"+e(t)+"</blockquote>\n"})}),{restrict:"E",require:"ngModel",scope:{ngModel:"=",placeholder:"@",showPreview:"@",showButtonBar:"@",help:"&",insertImage:"&",editorClass:"=?",editorRows:"@",previewClass:"=?",previewContent:"=?"},link:function(n,l,s,d){n.changed=function(){d.$setDirty(),n.$parent.$eval(s.ngChange)};var c;c=null===s.id?a++:s.id;var u="false"==n.showPreview?"display: none;":"",w="false"==n.showButtonBar?"display: none;":"",p=s.placeholder||"",v=s.editorRows||"10",g=e('<div><div class="wmd-panel"><div id="wmd-button-bar-'+c+'" style="'+w+'"></div><textarea id="wmd-input-'+c+'" placeholder="'+p+'" ng-model="ngModel" ng-change="changed()" rows="'+v+'" '+(n.editorClass?'ng-class="editorClass"':'class="wmd-input"')+'></textarea></div><div id="wmd-preview-'+c+'" style="'+u+'" '+(n.previewClass?'ng-class="previewClass"':'class="wmd-panel wmd-preview"')+"></div></div>")(n);l.append(g);var h=angular.isFunction(n.help)?n.help:function(){i.open("http://daringfireball.net/projects/markdown/syntax","_blank")},m=new Markdown.Editor(r,"-"+c,{handler:h}),f=angular.element(document.getElementById("wmd-input-"+c));f.val(n.ngModel),r.hooks.chain("postConversion",function(e){return d.$setViewValue(f.val()),n.previewContent=e,e}),"false"!=n.showPreview&&n.$watch("content",function(){m.refreshPreview()}),m.hooks.chain("onPreviewRefresh",function(){t(function(){n.content=f.val()})}),angular.isFunction(n.insertImage)&&m.hooks.set("insertImageDialog",function(e){var i=n.insertImage();return t(function(){i?o.when(i).then(function(n){e(n)},function(n){e(null)}):e(null)}),!0}),m.run()}}}]).directive("pagedownViewer",["$compile","$sce",function(e,t){var i=Markdown.getSanitizingConverter();return Markdown.Extra.init(i,n),{restrict:"E",scope:{content:"="},link:function(n,o,a){var r=function(){return n.content?void(n.sanitizedContent=t.trustAsHtml(i.makeHtml(n.content))):void(n.sanitizedContent="")};n.$watch("content",r),r();var l='<p ng-bind-html="sanitizedContent"></p>',s=e(l)(n);o.append(s)}}}])}();